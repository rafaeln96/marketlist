<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <title>Market List</title>
    <!-- jsPDF and AutoTable libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
    <header>
        <nav class="nav-bar">
            <div class="logo">
                <svg class="cart-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M7 18C5.9 18 5 18.9 5 20S5.9 22 7 22 9 21.1 9 20 8.1 18 7 18ZM1 2V4H3L6.6 11.59L5.25 14.04C5.09 14.32 5 14.65 5 15C5 16.1 5.9 17 7 17H19V15H7.42C7.28 15 7.17 14.89 7.17 14.75L7.2 14.63L8.1 13H15.55C16.3 13 16.96 12.59 17.3 11.97L20.88 5.48C20.96 5.34 21 5.17 21 5C21 4.45 20.55 4 20 4H5.21L4.27 2H1ZM17 18C15.9 18 15 18.9 15 20S15.9 22 17 22 19 21.1 19 20 18.1 18 17 18Z"
                        fill="currentColor" />
                </svg>
                <h1>MARKET LIST</h1>
            </div>

            <div class="nav-list">
                <ul>
                    <li class="nav-item"><a href="index.html" class="nav-link active">Início</a></li>
                    <li class="nav-item"><a href="lista-rapida.html" class="nav-link">Lista Rápida</a></li>
                    <li class="nav-item"><a href="sobre.html" class="nav-link">Sobre</a></li>
                </ul>
            </div>


            <div class="mobile-menu-icon">
                <button onclick="menuShow()">
                    <svg class="menu-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 18H21V16H3V18ZM3 13H21V11H3V13ZM3 6V8H21V6H3Z" fill="currentColor" />
                    </svg>
                </button>
            </div>
        </nav>

        <div class="mobile-menu">
            <ul>
                <li class="nav-item"><a href="index.html" class="nav-link">Início</a></li>
                <li class="nav-item"><a href="lista-rapida.html" class="nav-link">Lista Rápida</a></li>
                <li class="nav-item"><a href="sobre.html" class="nav-link">Sobre</a></li>
            </ul>


        </div>
    </header>

    <main>
        <section class="market-list-section">
            <h2>Adicionar Item à Lista de Mercado</h2>

            <!-- Mode Toggle Buttons -->
            <div class="mode-toggle">
                <button type="button" id="mode-unit-btn" class="mode-btn active" onclick="setFormMode('unit')">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
                        <path
                            d="M19 3H5C3.89 3 3 3.9 3 5V19C3 20.1 3.89 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM17 12H7V10H17V12Z"
                            fill="currentColor" />
                    </svg>
                    Por Unidade
                </button>
                <button type="button" id="mode-weight-btn" class="mode-btn" onclick="setFormMode('weight')">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="18" height="18">
                        <path
                            d="M12 3C10.34 3 9 4.34 9 6C9 6.35 9.06 6.69 9.16 7H3V21H21V7H14.84C14.94 6.69 15 6.35 15 6C15 4.34 13.66 3 12 3ZM12 5C12.55 5 13 5.45 13 6C13 6.55 12.55 7 12 7C11.45 7 11 6.55 11 6C11 5.45 11.45 5 12 5ZM5 9H19V19H5V9ZM12 11C9.79 11 8 12.79 8 15C8 17.21 9.79 19 12 19C14.21 19 16 17.21 16 15C16 12.79 14.21 11 12 11ZM12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13Z"
                            fill="currentColor" />
                    </svg>
                    Por Peso (Kg)
                </button>
            </div>

            <form id="market-list-form">
                <!-- Unit Mode Fields (default) -->
                <div id="unit-mode-fields" class="form-row">
                    <div class="form-group">
                        <label for="item-name">Nome do Item</label>
                        <input type="text" id="item-name" name="item-name" placeholder="Ex: Leite Integral">
                    </div>

                    <div class="form-group">
                        <label for="item-quantity">Quantidade</label>
                        <select id="item-quantity" name="item-quantity">
                            <option value="" disabled selected>Selecione</option>
                            <!-- As opções de 1 a 100 serão geradas via JavaScript -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="item-price">Valor Unitário (R$)</label>
                        <input type="text" id="item-price" name="item-price" placeholder="Ex: 5,50"
                            oninput="formatarMoeda(this)">
                    </div>
                </div>

                <!-- Weight Mode Fields (hidden by default) -->
                <div id="weight-mode-fields" class="form-row form-row-4" style="display: none;">
                    <div class="form-group">
                        <label for="item-name-weight">Nome do Item</label>
                        <input type="text" id="item-name-weight" name="item-name-weight" placeholder="Ex: Banana Prata">
                    </div>

                    <div class="form-group">
                        <label for="item-quantity-weight">Quantidade</label>
                        <select id="item-quantity-weight" name="item-quantity-weight">
                            <option value="" disabled selected>Selecione</option>
                            <!-- As opções de 1 a 100 serão geradas via JavaScript -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="item-price-kg">Valor por Kg (R$)</label>
                        <input type="text" id="item-price-kg" name="item-price-kg" placeholder="Ex: 4,99"
                            oninput="formatarMoeda(this)">
                    </div>

                    <div class="form-group">
                        <label for="item-weight">Peso (Kg)</label>
                        <input type="text" id="item-weight" name="item-weight" placeholder="Ex: 1,250"
                            oninput="formatarPeso(this)">
                    </div>
                </div>

                <div class="form-actions">
                    <button id="add-item-button" type="submit">Adicionar Item</button>
                    <button id="update-item-button" type="button" style="display: none;">Atualizar Item</button>
                    <button id="cancel-edit-button" type="button" style="display: none;">Cancelar</button>
                </div>
            </form>
        </section>

        <section class="item-display-section">
            <div class="section-header">
                <div class="total-inline">
                    <div class="total-info">
                        <span class="total-label">TOTAL:</span>
                        <span id="total-value">R$ 0,00</span>
                    </div>
                    <div class="items-count">
                        <span id="items-count">0</span> itens
                    </div>
                </div>
                <h2>Itens Adicionados</h2>
                <div class="list-actions">
                    <div class="search-box">
                        <label for="search-input">Buscar Itens</label>
                        <div class="search-input-wrapper">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z"
                                    fill="currentColor" />
                            </svg>
                            <input type="text" id="search-input" placeholder="Pesquisar por nome..."
                                oninput="searchItems(this.value)">
                        </div>
                    </div>
                    <button id="export-pdf-button" class="export-btn" onclick="exportToPDF()">
                        <svg class="pdf-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M7 18H17V16H7V18ZM20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H8V4H20V16ZM4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6ZM10 10H18V8L10 8V10ZM10 14H15V12H10V14Z"
                                fill="currentColor" />
                        </svg>
                        Exportar PDF
                    </button>
                </div>
            </div>
            <div id="item-list"></div>
        </section>
    </main>

    <!-- Custom Confirmation Modal -->
    <div id="confirmation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM13 17H11V15H13V17ZM13 13H11V7H13V13Z"
                        fill="#dc3545" />
                </svg>
            </div>
            <h3>Tem certeza?</h3>
            <p>Deseja realmente remover este item da lista? Esta ação não pode ser desfeita.</p>
            <div class="modal-actions">
                <button class="modal-btn cancel-btn" onclick="closeModal()">Cancelar</button>
                <button class="modal-btn confirm-btn" onclick="confirmRemoval()">Remover</button>
            </div>
        </div>
    </div>

    <script src="assets/js/script.js"></script>
</body>

</html>